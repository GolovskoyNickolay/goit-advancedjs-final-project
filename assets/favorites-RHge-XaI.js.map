{"version":3,"file":"favorites-RHge-XaI.js","sources":["../../src/js/favourites.js"],"sourcesContent":["import { NAME_OF_STORAGE, TEXT_IF_EMPTY } from \"./main-section/constants\";\nimport { getExercises } from \"../services/apiServices\";\nimport Exercise from \"./main-section/exercise\";\n\n// getExercises({ bodypart: 'back' })\n//     .then(data => {\n//         data.results.forEach(exercise => {\n//             addFavouritesToStorage(exercise);\n//         });\n//     })\n//     .catch(error => {\n//         console.error('Error fetching exercises:', error);\n//     });\n\nfunction addFavouritesToStorage(data) {\n    const exercises = getExercisesFromStorage(NAME_OF_STORAGE);\n    exercises[data._id] = data;\n    localStorage.setItem(NAME_OF_STORAGE, JSON.stringify(exercises));\n}\n\nfunction removeFavouritesFromStorage(id) {\n    const exercises = getExercisesFromStorage(NAME_OF_STORAGE);\n    if (exercises.hasOwnProperty(id)) {\n        delete exercises[id];\n    } else {\n        console.warn(`Exercise with id ${id} does not exist in storage.`);\n    }\n    localStorage.setItem(NAME_OF_STORAGE, JSON.stringify(exercises));\n}\n\nconst refs = {\n    list: document.getElementById(\"favourites\"),\n}\n\n/**\n * @param {string} name \n * @returns {object} Array of exercises from local storage.\n */\nfunction getExercisesFromStorage(name) {\n    if (!localStorage) {\n        console.error('Local storage is not supported in this browser.');\n        return {};\n    }\n    const exercises = localStorage.getItem(name);\n    return exercises ? JSON.parse(exercises) : {};\n}\n\nfunction renderList() {\n    const exercisesObj = getExercisesFromStorage(NAME_OF_STORAGE);\n    const exercises = Object.values(exercisesObj);\n\n    if (!Array.isArray(exercises)) {\n        console.error('Invalid exercises data:', exercises);\n        renderEmpty();\n        return;\n    }\n\n    if (exercises.length === 0) {\n        renderEmpty();\n        return;\n    }\n\n    const list = document.createElement(\"ul\");\n    list.classList.add(\"exercise-list\");\n    list.innerHTML = exercises.map(el => Exercise.exerciseMarkup(el, true)).join('');\n    refs.list.innerHTML = \"\";\n    refs.list.appendChild(list);\n}\n\nfunction renderEmpty() {\n    refs.list.innerHTML = `<p class=\"text\">${TEXT_IF_EMPTY}</p>`;\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    renderList();\n});\n\ndocument.removeFavourite = function (element) {\n    const id = element.closest('[data-id]').dataset.id;\n    removeFavouritesFromStorage(id);\n    renderList();\n}\n"],"names":["removeFavouritesFromStorage","id","exercises","getExercisesFromStorage","NAME_OF_STORAGE","refs","name","renderList","exercisesObj","renderEmpty","list","el","Exercise","TEXT_IF_EMPTY","element"],"mappings":"mHAoBA,SAASA,EAA4BC,EAAI,CACrC,MAAMC,EAAYC,EAAwBC,CAAe,EACrDF,EAAU,eAAeD,CAAE,EAC3B,OAAOC,EAAUD,CAAE,EAEnB,QAAQ,KAAK,oBAAoBA,CAAE,6BAA6B,EAEpE,aAAa,QAAQG,EAAiB,KAAK,UAAUF,CAAS,CAAC,CACnE,CAEA,MAAMG,EAAO,CACT,KAAM,SAAS,eAAe,YAAY,CAC9C,EAMA,SAASF,EAAwBG,EAAM,CACnC,GAAI,CAAC,aACD,eAAQ,MAAM,iDAAiD,EACxD,GAEX,MAAMJ,EAAY,aAAa,QAAQI,CAAI,EAC3C,OAAOJ,EAAY,KAAK,MAAMA,CAAS,EAAI,CAAA,CAC/C,CAEA,SAASK,GAAa,CAClB,MAAMC,EAAeL,EAAwBC,CAAe,EACtDF,EAAY,OAAO,OAAOM,CAAY,EAE5C,GAAI,CAAC,MAAM,QAAQN,CAAS,EAAG,CAC3B,QAAQ,MAAM,0BAA2BA,CAAS,EAClDO,IACA,MACH,CAED,GAAIP,EAAU,SAAW,EAAG,CACxBO,IACA,MACH,CAED,MAAMC,EAAO,SAAS,cAAc,IAAI,EACxCA,EAAK,UAAU,IAAI,eAAe,EAClCA,EAAK,UAAYR,EAAU,IAAIS,GAAMC,EAAS,eAAeD,EAAI,EAAI,CAAC,EAAE,KAAK,EAAE,EAC/EN,EAAK,KAAK,UAAY,GACtBA,EAAK,KAAK,YAAYK,CAAI,CAC9B,CAEA,SAASD,GAAc,CACnBJ,EAAK,KAAK,UAAY,mBAAmBQ,CAAa,MAC1D,CAEA,SAAS,iBAAiB,mBAAoB,IAAM,CAChDN,GACJ,CAAC,EAED,SAAS,gBAAkB,SAAUO,EAAS,CAC1C,MAAMb,EAAKa,EAAQ,QAAQ,WAAW,EAAE,QAAQ,GAChDd,EAA4BC,CAAE,EAC9BM,GACJ"}