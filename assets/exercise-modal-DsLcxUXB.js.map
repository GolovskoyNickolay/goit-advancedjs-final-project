{"version":3,"mappings":"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","names":["backdrop","event","body","scrollTimeoutId","onWheel","menuLinks","link","api","axios","response","error","serverMessage","_a","iziToast","getExercises","params","data","getExerciseById","id","updateExerciseRating","ratingData","getFilters","getQuoteOfTheDay","getQuote","today","storedQuote","storedAuthor","storedDate","quoteText","author","capitalizeFirstLetter","val","findClosestParrent","el","nodeNameFind","nodeNameStop","MOBILE","isMobile","INVISIABLE_CLASS","NAME_OF_STORAGE","TEXT_IF_EMPTY","FILTERS","searchQueryParams","key","value","urlParams","newurl","spriteUrl","Exercise","isIndexPage","paginationInstance","modalInstance","__publicField","index","keyword","instance","module","__vitePreload","filter","exercise","page","options","_id","rating","name","burnedCalories","time","bodyPart","target","isFavourite","text","isFavouritesExercise","getExercisesFromStorage","addFavouritesToStorage","exercises","setItemToLocalStorage","removeFavouritesFromStorage","refs","renderList","exercisesObj","renderEmpty","list","init","element","ExerciseModal","RatingModal","modalBody","backToExercise","ratingInputs","ratingValue","input","exerciseId","form","formData","rate","email","review","res","card","favoritesBtn","rateBtn","button","ex"],"ignoreList":[],"sources":["../../src/js/menu.js","../../src/js/header-sticky.js","../../src/api.js","../../src/services/apiServices.js","../../src/js/main-section/quote.js","../../src/js/utils.js","../../src/js/main-section/constants.js","../../src/js/main-section/searchParams.js","../../src/img/icons.svg","../../src/js/main-section/exercise.js","../../src/js/favourites.js","../../src/js/modal/raiting-modal.js","../../src/js/modal/exercise-modal.js"],"sourcesContent":["const backdrop = document.getElementById('backdrop');\n\nwindow.openMenu = () => {\n  backdrop?.classList.add('is-open');\n};\n\nwindow.closeMenu = () => {\n  backdrop?.classList.remove('is-open');\n};\n\nwindow.menuLayoutClickHandler = (event) => {\n  event.stopPropagation();\n};\n","const header = document.querySelector('.router');\nconst body = document.body;\n\nlet lastScrollTop = 0;\nlet scrollTimeoutId;\n\nconst onScroll = () => {\n  if (!body.hasAttribute('data-user-scrolling')) {\n    return;\n  }\n\n  const scrollTop = document.documentElement.scrollTop;\n\n  header.classList.add('sticky');\n\n  if (scrollTop > 0) {\n    header.classList.toggle('hidden', scrollTop > lastScrollTop);\n  } else {\n    header.classList.remove('sticky');\n  }\n\n  lastScrollTop = scrollTop;\n};\n\nconst onWheel = () => {\n  body.setAttribute('data-user-scrolling', 'true');\n\n  clearTimeout(scrollTimeoutId);\n  scrollTimeoutId = setTimeout(() => {\n    body.removeAttribute('data-user-scrolling');\n  }, 100);\n};\n\n// window.addEventListener('scroll', onScroll);\ndocument.addEventListener('wheel', onWheel);\n\nconst menuLinks = document.querySelectorAll('.menu-items.router .menu-item a');\n\nmenuLinks.forEach((link) => {\n  if (link.href === window.location.href || window.location.pathname.endsWith(link.getAttribute('href'))) {\n    link.parentElement.classList.add('active');\n  } else {\n    link.parentElement.classList.remove('active');\n  }\n});\n","import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport './css/iziToast.css'\n\nconst api = axios.create({\n  baseURL: 'https://your-energy.b.goit.study/api',\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\napi.interceptors.response.use(\n  response => {\n    return response;\n  },\n  error => {\n    if (error.response && error.response.status === 409) {\n      const serverMessage =\n              error.response.data?.message || 'Subscription already exists';\n\n      iziToast.error({\n        title: 'Subscription Error',\n        message: serverMessage,\n        position: 'topRight',\n      });\n\n      return { data: null };\n    } else {\n      console.error(error);\n      iziToast.error({\n        title: 'Request Error',\n        message: error?.message,\n        position: 'topRight',\n      });\n\n      return { data: null };\n    }\n  },\n);\n\nexport default api;\n","import api from '../api.js';\n\n/**\n * @param {Object} params - The query parameters for the request.\n * @param {string} [params.bodypart] - The body part to filter by (e.g., \"back\", \"legs\").\n * @param {string} [params.equipment] - The equipment to filter by (e.g., \"dumbbell\", \"barbell\").\n * @param {number} [params.page=1] - The page number for pagination.\n * @param {number} [params.limit=10] - The number of items per page.\n * @returns {Promise<Object>} A promise that resolves with the list of exercises.\n */\nexport async function getExercises(params) {\n  const { data } = await api.get('/exercises', { params });\n  return data;\n}\n\n/**\n * @param {string|number} id - The identifier of the exercise.\n * @returns {Promise<Object>} A promise that resolves with the exercise details.\n */\nexport async function getExerciseById(id) {\n  const { data } = await api.get(`/exercises/${id}`);\n  return data;\n}\n\n/**\n * @param {string|number} id - The identifier of the exercise to update.\n * @param {Object} ratingData - The rating data object.\n * @param {number} ratingData.rating - The new rating value (e.g., a number from 1 to 5).\n * @returns {Promise<void>} A promise that resolves once the rating has been updated.\n */\nexport async function updateExerciseRating(id, ratingData) {\n  const { data } = api.patch(`/exercises/${id}/rating`, ratingData);\n  return data;\n}\n\n/**\n * @param {Object} [params={}] - The filter parameters for the request.\n * @param {string} [params.filter] - The type of filter (e.g., \"body parts\", \"muscles\", \"equipment\").\n * @param {number} [params.page=1] - The page number for pagination.\n * @param {number} [params.limit=12] - The number of items per page.\n * @returns {Promise<Object>} A promise that resolves with the filter data.\n */\nexport async function getFilters(params = {}) {\n  const { data } = await api.get('/filters', { params });\n  return data;\n}\n\n/**\n * @returns {Promise<Object>} A promise that resolves with the quote data.\n * The returned object may contain the following fields:\n * - `quote` {string} - The text of the quote.\n * - `author` {string} - The author of the quote.\n */\nexport async function getQuoteOfTheDay() {\n  const { data } = await api.get('/quote');\n  return data;\n}\n\n/**\n * @param {string} email - The email address of the user who wants to subscribe.\n * @returns {Promise<Object>} A promise that resolves with the server response.\n * The response object may include the following field:\n * - `message` {string} - A message indicating success or that the subscription already exists.\n */\nexport async function subscribe(email) {\n  const { data } = await api.post('/subscription', { email });\n  return data;\n}\n","import { getQuoteOfTheDay } from '../../services/apiServices';\n\nasync function getQuote() {\n  const today = new Date().toISOString().split('T')[0];\n\n  const storedQuote = localStorage.getItem('quote');\n  const storedAuthor = localStorage.getItem('author');\n  const storedDate = localStorage.getItem('quoteDate');\n\n  if (storedQuote && storedAuthor && storedDate === today) {\n    document.querySelector('.sidebar-quote').textContent = `${storedQuote}`;\n    document.querySelector('.sidebar-quote-author').textContent = `${storedAuthor}`;\n    return;\n  }\n\n  const data = await getQuoteOfTheDay();\n  const quoteText = data.quote;\n  const author = data.author;\n\n  document.querySelector('.sidebar-quote').textContent = `${quoteText}`;\n  document.querySelector('.sidebar-quote-author').textContent = `${author}`;\n\n  localStorage.setItem('quote', quoteText);\n  localStorage.setItem('author', author);\n  localStorage.setItem('quoteDate', today);\n}\n\ngetQuote();\n","/**\n *\n * @param {string} val\n * @returns string\n */\nexport function capitalizeFirstLetter(val) {\n  return String(val).charAt(0).toUpperCase() + String(val).slice(1);\n}\n\n/**\n *\n * @param {HTMLElement} el\n * @returns {HTMLElement | null}\n */\nexport function findClosestParrent(\n  el,\n  nodeNameFind = 'LI',\n  nodeNameStop = 'UL'\n) {\n  while (el.nodeName !== nodeNameFind && el.nodeName !== nodeNameStop) {\n    el = el.parentElement;\n  }\n\n  return el.nodeName === nodeNameFind ? el : null;\n}\n\nconst MOBILE = 768;\nconst TABLET = 1152;\n\nexport const isMobile = () => {\n  return window.innerWidth < MOBILE;\n};\n\nexport const isTablet = () => {\n  return !isMobile() && window.innerWidth < TABLET;\n};\n","export const INVISIABLE_CLASS = 'invisiable';\nexport const NAME_OF_STORAGE = 'favouritesExercises';\nexport const TEXT_IF_EMPTY = \"It appears that you haven't added any exercises to your favorites yet. To get started, you can add exercises that you like to your favorites for easier access in the future.\";\nexport const INDEX_PATH = '/goit-advancedjs-final-project/';\n\nexport const FILTERS = {\n  Muscles: 'muscles',\n  'Body parts': 'bodypart',\n  Equipment: 'equipment',\n};\n","const searchQueryParams = {\n  initParams: new URLSearchParams(window.location.search),\n\n  set(key, value) {\n    const urlParams = new URLSearchParams(window.location.search);\n    urlParams.set(key, value);\n    this.update(urlParams);\n  },\n  new(key, value) {\n    const urlParams = new URLSearchParams();\n    urlParams.set(key, value);\n    this.update(urlParams);\n  },\n  get(key) {\n    const urlParams = new URLSearchParams(window.location.search);\n    return urlParams.get(key);\n  },\n  delete(key) {\n    const urlParams = new URLSearchParams(window.location.search);\n    urlParams.delete(key);\n    update(urlParams);\n  },\n\n  update(urlParams) {\n    if (history.pushState) {\n      const newurl =\n        window.location.protocol +\n        '//' +\n        window.location.host +\n        window.location.pathname +\n        '?' +\n        urlParams.toString();\n      window.history.pushState({ path: newurl }, '', newurl);\n    }\n  },\n};\nexport default searchQueryParams;\n","export default \"__VITE_ASSET__DcI9V2O2__\"","import { getExercises } from '../../services/apiServices';\nimport { isMobile } from '../utils';\nimport { INVISIABLE_CLASS, FILTERS } from './constants';\nimport searchQueryParams from './searchParams.js';\nimport spriteUrl from '../../img/icons.svg';\n\nexport default class Exercise {\n  constructor(isIndexPage, paginationInstance, modalInstance) {\n    this.exerciseyList = document.body.querySelector('.exercise-list');\n    this.limit = isMobile() ? 8 : 10;\n    this.paginationInstance = paginationInstance;\n    this.errorElement = document.body.querySelector('[data-exerciseError]');\n    this.modalInstance = modalInstance;\n    this.exerciseyList.addEventListener('click', event =>\n      this.handleExerciseClick(event)\n    );\n\n    if (!isIndexPage) return;\n    (async function (instance) {\n      const module = await import('./search.js');\n      instance.searchForm = module.default;\n\n      if (instance.onloalLibrariesCallback) instance.onloalLibrariesCallback();\n    })(this);\n  }\n\n  init(filter, exercise, keyword = '', page = 1) {\n    if (this.timeoutID) {\n      clearTimeout(this.timeoutID);\n      this.timeoutID = null;\n    }\n    this.show();\n    this.filter = filter;\n    this.exercise = exercise;\n    this.keyword = keyword;\n    if (this.searchForm) {\n      this.searchForm.show();\n      this.searchForm.setValue(keyword);\n      this.searchForm.callback = this.searchCallback;\n    }\n    this.render(page);\n  }\n\n  handleExerciseClick(event) {\n    this.modalInstance.open(event);\n  }\n\n  async render(page = 1) {\n    try {\n      const options = {\n        [FILTERS[this.filter]]: this.exercise,\n        limit: this.limit,\n        page,\n      };\n\n      if (this.keyword) options.keyword = this.keyword;\n      const data = await getExercises(options);\n\n      this.page = page;\n\n      if (data.results.length) {\n        this.errorHide();\n        this.exerciseyList.innerHTML = data.results\n          .map(el => Exercise.exerciseMarkup(el))\n          .join('');\n      } else {\n        this.exerciseyList.innerHTML = '';\n        this.errorShow();\n      }\n\n      this.paginationInstance.render(data.totalPages, data.page);\n      this.paginationInstance.callback = this.paginationExerciseCallback;\n      this.show();\n    } catch (error) {\n      iziToast.error({\n        title: 'Unexpected error',\n        message: 'Try to refresh the page',\n        position: 'topRight',\n      });\n    }\n  }\n\n  static exerciseMarkup(\n    { _id, rating, name, burnedCalories, time, bodyPart, target },\n    isFavourite = false\n  ) {\n    return `<li class=\"workout-card\" data-id=\"${_id}\">\n          <div class=\"workout-card-container\">\n            <div class=\"workout-header\">\n              <span class=\"workout-badge\">WORKOUT</span>\n              ${\n                isFavourite\n                  ? `<button onclick=\"document.removeFavourite(this)\" class=\"workout-remove-btn\">\n                  <svg width=\"16\" height=\"16\" class=\"workout-remove-icon\">\n                    <use xlink:href=\"${spriteUrl}#icon-remove\"></use>\n                  </svg></button>`\n                  : `<div class=\"workout-rating\">\n                    <span class=\"workout-rating-value\">${rating.toFixed(\n                      2\n                    )}</span>\n                    <svg width=\"18\" height=\"18\" class=\"workout-rating-icon\">\n                      <use xlink:href=\"${spriteUrl}#icon-Star\"></use>\n                    </svg>\n                  </div>`\n              }\n              <a href=\"#\" class=\"workout-start-btn\"\n                >Start\n                <svg width=\"16\" height=\"16\" class=\"workout-start-icon\">\n                  <use xlink:href=\"${spriteUrl}#icon-start\"></use>\n                </svg>\n              </a>\n            </div>\n            <div class=\"workout-body\">\n              <svg width=\"24\" height=\"24\" class=\"workout-icon\">\n                <use xlink:href=\"${spriteUrl}#icon-running\"></use>\n              </svg>\n              <h3 class=\"workout-title\">${name}</h3>\n            </div>\n            <ul class=\"workout-meta\">\n              <li class=\"workout-meta-item\">\n                <span class=\"workout-meta-name\">Burned calories:</span>\n                <span class=\"workout-meta-value\">${burnedCalories} / ${\n      time || '...'\n    }</span>\n              </li>\n              <li class=\"workout-meta-item\">\n                <span class=\"workout-meta-name\">Body part:</span>\n                <span class=\"workout-meta-value\">${bodyPart}</span>\n              </li>\n              <li class=\"workout-meta-item\">\n                <span class=\"workout-meta-name\">Target:</span>\n                <span class=\"workout-meta-value\">${target}</span>\n              </li>\n            </ul>\n          </div>\n        </li>`;\n  }\n\n  paginationExerciseCallback = index => {\n    searchQueryParams.set('page', index);\n    this.render(index);\n  };\n\n  searchCallback = keyword => {\n    this.keyword = keyword || '';\n    if (keyword) searchQueryParams.set('keyword', keyword);\n    else searchQueryParams.delete('keyword');\n\n    this.render();\n  };\n\n  show() {\n    this.exerciseyList.classList.remove(INVISIABLE_CLASS);\n    this.exerciseyList.hidden = false;\n  }\n\n  hide() {\n    this.exerciseyList.classList.add(INVISIABLE_CLASS);\n    this.exerciseyList.hidden = true;\n    this.errorHide();\n    this.timeoutID = setTimeout(() => {\n      this.exerciseyList.innerHTML = '';\n    }, 150);\n  }\n\n  errorShow(text = 'Exersice was not found') {\n    this.errorElement.innerHTML = text;\n    this.errorElement.classList.remove(INVISIABLE_CLASS);\n    this.errorElement.hidden = false;\n  }\n\n  errorHide() {\n    this.errorElement.innerHTML = '';\n    this.errorElement.classList.add(INVISIABLE_CLASS);\n    this.errorElement.hidden = true;\n  }\n}\n","import { NAME_OF_STORAGE, TEXT_IF_EMPTY } from './main-section/constants';\nimport Exercise from './main-section/exercise.js';\nimport { ExerciseModal } from './modal/exercise-modal.js';\n\nlet modalInstance;\nexport function isFavouritesExercise(id) {\n  const exercises = getExercisesFromStorage(NAME_OF_STORAGE);\n\n  return Boolean(exercises[id]);\n}\n\nexport function addFavouritesToStorage(data) {\n  const exercises = getExercisesFromStorage(NAME_OF_STORAGE);\n  exercises[data._id] = data;\n  setItemToLocalStorage(NAME_OF_STORAGE, JSON.stringify(exercises));\n}\n\nexport function removeFavouritesFromStorage(id) {\n  const exercises = getExercisesFromStorage(NAME_OF_STORAGE);\n  if (exercises.hasOwnProperty(id)) {\n    delete exercises[id];\n  } else {\n    console.warn(`Exercise with id ${id} does not exist in storage.`);\n  }\n  setItemToLocalStorage(NAME_OF_STORAGE, JSON.stringify(exercises));\n}\n\nlet setItemToLocalStorage = function (key, value) {\n  localStorage.setItem(key, value);\n};\n\nconst refs = {\n  list: document.getElementById('favourites'),\n};\n\n/**\n * @param {string} name\n * @returns {object} Array of exercises from local storage.\n */\nfunction getExercisesFromStorage(name) {\n  if (!localStorage) {\n    console.error('Local storage is not supported in this browser.');\n    return {};\n  }\n  const exercises = localStorage.getItem(name);\n  return exercises ? JSON.parse(exercises) : {};\n}\n\nfunction renderList() {\n  const exercisesObj = getExercisesFromStorage(NAME_OF_STORAGE);\n  const exercises = Object.values(exercisesObj);\n\n  if (!Array.isArray(exercises)) {\n    console.error('Invalid exercises data:', exercises);\n    renderEmpty();\n    return;\n  }\n\n  if (exercises.length === 0) {\n    renderEmpty();\n    return;\n  }\n\n  const list = document.createElement('ul');\n  list.classList.add('exercise-list');\n  list.innerHTML = exercises\n    .map(el => Exercise.exerciseMarkup(el, true))\n    .join('');\n  refs.list.innerHTML = '';\n  refs.list.appendChild(list);\n\n  list.addEventListener('click', event => {\n    if (\n      event.target.closest('button') &&\n      event.target.closest('button').classList.has('workout-remove-btn')\n    )\n      return;\n\n    modalInstance.open(event);\n  });\n}\n\nfunction renderEmpty() {\n  refs.list.innerHTML = `<div class=\"favourites-not-found\"><p>${TEXT_IF_EMPTY}</p></div>`;\n}\n\nfunction init() {\n  document.addEventListener('DOMContentLoaded', () => {\n    renderList();\n  });\n\n  document.removeFavourite = function (element) {\n    const id = element.closest('[data-id]').dataset.id;\n    removeFavouritesFromStorage(id);\n    renderList();\n  };\n}\n\nif (window.location.pathname.includes('favorites.html')) {\n  setTimeout(()=>{\n    modalInstance = new ExerciseModal();\n  });\n  setItemToLocalStorage = function (key, value) {\n    localStorage.setItem(key, value);\n\n    renderList();\n  };\n\n  init();\n}\n","import iziToast from 'izitoast';\nimport { updateExerciseRating } from '../../services/apiServices.js';\n\nimport spriteUrl from '../../img/icons.svg';\n\nexport class RatingModal {\n  constructor(modalBody, backToExercise) {\n    this.modalBody = modalBody;\n    this.exerciseId = null;\n    this.backToExercise = backToExercise;\n  }\n\n  setupStarsUpdate() {\n    const ratingInputs = this.modalBody.querySelectorAll(\n      'input[name=\"rating\"]'\n    );\n    const ratingValue = this.modalBody.querySelector('.rating-options-value');\n\n    ratingInputs.forEach(input => {\n      input.addEventListener('change', () => {\n        ratingValue.textContent = `${parseFloat(input.value).toFixed(1)}`;\n      });\n    });\n  }\n\n  createRatingStars = () => {\n    return `\n      <div class=\"rating-options-wrapper\">\n        <span class=\"rating-options-value\">0.0</span>\n        <div class=\"rating-options\">\n          ${[5, 4, 3, 2, 1]\n            .map(\n              value => `\n            <input type=\"radio\" id=\"star${value}\" name=\"rating\" value=\"${value}\" />\n            <label for=\"star${value}\" class=\"rating-label\">\n              <svg class=\"rating-star\" width=\"24\" height=\"24\">\n                <use href=\"${spriteUrl}#icon-Star\"></use>\n              </svg>\n            </label>\n          `\n            )\n            .join('')}\n        </div>\n      </div>\n  `;\n  };\n\n  open(exerciseId) {\n    this.exerciseId = exerciseId;\n\n    this.modalBody.innerHTML = `\n      <div class=\"rating-modal\">\n        <span class=\"rating-modal-title\">Rating</span>\n        \n        <form class=\"rating-form\">\n          ${this.createRatingStars()}\n          \n          <input\n            type=\"email\" \n            name=\"email\" \n            class=\"rating-input rating-input-email\"\n            required \n            placeholder=\"Email\"\n          />\n\n          <textarea\n            class=\"rating-input rating-input-comment\"\n            name=\"comment\" \n            required\n            placeholder=\"Your comment\"></textarea>\n\n          <button class=\"rating-submit-btn primary-btn\" type=\"submit\">Send</button>\n        </form>\n      </div>\n    `;\n\n    const form = this.modalBody.querySelector('.rating-form');\n    form.addEventListener('submit', event => this.handleSubmit(event));\n\n    this.setupStarsUpdate();\n  }\n\n  async handleSubmit(event) {\n    event.preventDefault();\n\n    const form = event.target;\n    const formData = new FormData(form);\n\n    const rate = formData.get('rating');\n    const email = formData.get('email');\n    const review = formData.get('comment');\n\n    if (!rate || !email || !review) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Please fill in all fields!',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    const data = {\n      rate: Number(rate),\n      email,\n      review,\n    };\n\n    try {\n      const res = await updateExerciseRating(this.exerciseId, data);\n      console.log(res);\n      iziToast.success({\n        title: 'Update rating',\n        message: 'Update was successfully!',\n        position: 'topRight',\n      });\n\n      this.close();\n    } catch (error) {\n      iziToast.error({\n        title: 'Update Error',\n        message: error.message,\n        position: 'topRight',\n      });\n    }\n  }\n\n  close() {\n    this.modalBody.innerHTML = '';\n    this.exerciseId = null;\n    this.backToExercise();\n  }\n}\n","import { getExerciseById } from '../../services/apiServices.js';\nimport {\n  addFavouritesToStorage,\n  isFavouritesExercise,\n  removeFavouritesFromStorage,\n} from '../favourites.js';\nimport iziToast from 'izitoast';\nimport { RatingModal } from './raiting-modal.js';\nimport spriteUrl from '../../img/icons.svg';\n\nexport class ExerciseModal {\n  constructor() {\n    this.modalOverlay = document.querySelector('.modal-overlay');\n    this.modal = document.getElementById('exerciseModal');\n    this.modalBody = document.querySelector('.modal-body');\n    this.closeBtn = this.modal.querySelector('.modal-close');\n\n    this.ratingModal = new RatingModal(this.modalBody, this.render.bind(this));\n\n    this.exercise = null;\n    this.isFavorite = false;\n    this.isRatingOpen = false;\n\n    this.handleOverlayClick = this.handleOverlayClick.bind(this);\n    this.handleEscKey = this.handleEscKey.bind(this);\n    this.handleClose = this.handleClose.bind(this);\n  }\n\n  async open(event) {\n    const card = event.target.closest('.workout-card');\n    if (!card) return;\n\n    const id = card.dataset.id;\n\n    this.modalOverlay.classList.add('is-open');\n    this.modalBody.innerHTML = this.createSkeletonMarkup();\n\n    try {\n      this.exercise = await getExerciseById(id);\n      this.isFavorite = isFavouritesExercise(this.exercise._id);\n\n      this.render();\n\n      this.modalOverlay.addEventListener('click', this.handleOverlayClick);\n      window.addEventListener('keydown', this.handleEscKey);\n      this.closeBtn.addEventListener('click', this.handleClose);\n    } catch (error) {\n      iziToast.error({\n        title: 'Request exercise Error',\n        message: error?.message,\n        position: 'topRight',\n      });\n\n      console.error(error);\n      this.modalBody.innerHTML =\n        '<p class=\"error\">Failed to load exercise. Try again later.</p>';\n    }\n  }\n\n  close() {\n    this.modalOverlay.classList.remove('is-open');\n    this.exercise = null;\n    this.isFavorite = false;\n    this.isRatingOpen = false;\n\n    this.modalOverlay.removeEventListener('click', this.handleOverlayClick);\n    this.closeBtn.removeEventListener('click', this.handleClose);\n    window.removeEventListener('keydown', this.handleEscKey);\n  }\n\n  render() {\n    this.modalBody.innerHTML = this.createExerciseMarkup();\n    this.addEventListeners();\n  }\n\n  addEventListeners() {\n    const favoritesBtn = this.modal.querySelector('.favorites-btn');\n    const rateBtn = this.modal.querySelector('.rate-btn');\n\n    favoritesBtn.addEventListener('click', () =>\n      this.toggleFavorite(favoritesBtn)\n    );\n    rateBtn.addEventListener('click', () => {\n      this.ratingModal.open(this.exercise._id);\n      this.isRatingOpen = true;\n    });\n  }\n\n  toggleFavorite(button) {\n    if (this.isFavorite) {\n      removeFavouritesFromStorage(this.exercise._id);\n      this.isFavorite = false;\n    } else {\n      addFavouritesToStorage(this.exercise);\n      this.isFavorite = true;\n    }\n    this.updateFavoritesButton(button);\n  }\n\n  updateFavoritesButton(button) {\n    button.innerHTML = `\n      <span class=\"favorites-btn-text\">\n        ${this.isFavorite ? 'Remove from favorites' : 'Add to favorites'}\n      </span>\n      <svg class=\"icon-heart\" height=\"18\" width=\"20\">\n        <use href=\"${spriteUrl}#${\n      this.isFavorite ? 'icon-trash' : 'icon-heart'\n    }\"></use>\n      </svg>\n    `;\n  }\n\n  createStars(rating) {\n    const fillPercent = (rating / 5) * 100;\n\n    return `\n    <div class=\"rating\" style=\"--fill: ${fillPercent}%;\">\n      <div class=\"rating-bg\">\n        ${[...Array(5)]\n          .map(\n            () => `\n          <svg class=\"star\" width=\"18\" height=\"18\">\n            <use href=\"${spriteUrl}#icon-Star\"></use>\n          </svg>\n        `\n          )\n          .join('')}\n      </div>\n      <div class=\"rating-fill\">\n        ${[...Array(5)]\n          .map(\n            () => `\n          <svg class=\"star\" width=\"18\" height=\"18\">\n            <use href=\"${spriteUrl}#icon-Star\"></use>\n          </svg>\n        `\n          )\n          .join('')}\n      </div>\n    </div>\n  `;\n  }\n\n  createExerciseMarkup() {\n    const ex = this.exercise;\n    return `\n      <div class=\"exercise-details\">\n        ${\n          ex.gifUrl\n            ? `<img src=\"${ex.gifUrl}\" alt=\"${ex.name}\" class=\"exercise-img\">`\n            : ''\n        }\n        <div class=\"exercise-content\">\n          <div>\n            <h2 class=\"exercise-title\">${ex.name}</h2>\n\n            <div class=\"exercise-rate\">\n              <p>${ex.rating}</p>\n              ${this.createStars(ex.rating)}\n            </div>\n\n            <ul class=\"exercise-info\">\n              <li>Target<span>${ex.target}</span></li>\n              <li>Body Part<span>${ex.bodyPart}</span></li>\n              <li>Equipment<span>${ex.equipment}</span></li>\n              <li>Popular<span>${ex.popularity}</span></li>\n              <li>Burned calories<span>${ex.burnedCalories}</span></li>\n            </ul>\n\n            <p class=\"exercise-description\">${ex.description}</p>\n          </div>\n\n          <div class=\"exercise-buttons\">\n            <button type=\"button\" class=\"favorites-btn primary-btn\" data-id=\"${\n              ex._id\n            }\">\n              <span class=\"favorites-btn-text\">\n                ${\n                  this.isFavorite ? 'Remove from favorites' : 'Add to favorites'\n                }\n              </span>\n              <svg class=\"icon-heart\" height=\"18\" width=\"20\">\n                <use href=\"${spriteUrl}#${\n      this.isFavorite ? 'icon-trash' : 'icon-heart'\n    }\"></use>\n              </svg>\n            </button>\n            \n            <button type=\"button\" class=\"rate-btn\" data-id=\"${\n              ex._id\n            }\">Give a rating</button>\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  handleOverlayClick(event) {\n    if (event.target === this.modalOverlay) {\n      if (this.isRatingOpen) {\n        this.ratingModal.close();\n        this.isRatingOpen = false;\n      } else {\n        this.close();\n      }\n    }\n  }\n\n  handleEscKey(event) {\n    if (event.key === 'Escape') {\n      if (this.isRatingOpen) {\n        this.ratingModal.close();\n        this.isRatingOpen = false;\n      } else {\n        this.close();\n      }\n    }\n  }\n\n  handleClose(event) {\n    if (this.isRatingOpen) {\n      this.ratingModal.close();\n      this.isRatingOpen = false;\n    } else {\n      this.close();\n    }\n  }\n\n  createSkeletonMarkup() {\n    return `\n    <div class=\"exercise-details skeleton\">\n      <div class=\"exercise-img skeleton-img\"></div>\n      <div class=\"exercise-content\">\n        <div class=\"skeleton-title\"></div>\n        <div class=\"skeleton-rate\"></div>\n        <ul class=\"exercise-info\">\n          ${[...Array(5)]\n            .map(\n              () => `\n            <li class=\"skeleton-info-item\">\n              <div class=\"skeleton-line\"></div>\n            </li>\n          `\n            )\n            .join('')}\n        </ul>\n        <div class=\"skeleton-description\"></div>\n        <div class=\"exercise-buttons\">\n          <div class=\"skeleton-button\"></div>\n          <div class=\"skeleton-button\"></div>\n        </div>\n      </div>\n    </div>\n  `;\n  }\n}\n"],"file":"assets/exercise-modal-DsLcxUXB.js"}