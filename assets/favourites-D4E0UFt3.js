const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/search-C0UI3lRV.js","assets/vendor-BAoYjrW1.js","assets/vendor-D_nxXpU-.css"])))=>i.map(i=>d[i]);
var A=Object.defineProperty;var M=(e,t,s)=>t in e?A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var y=(e,t,s)=>M(e,typeof t!="symbol"?t+"":t,s);import{a as U,i as g}from"./vendor-BAoYjrW1.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();const u=document.getElementById("backdrop");window.openMenu=()=>{u==null||u.classList.add("is-open")};window.closeMenu=()=>{u==null||u.classList.remove("is-open")};window.menuLayoutClickHandler=e=>{e.stopPropagation()};const v=document.querySelector(".router"),L=document.body;let k=0,T;const j=()=>{if(!L.hasAttribute("data-user-scrolling"))return;const e=document.documentElement.scrollTop;v.classList.add("sticky"),e>0?v.classList.toggle("hidden",e>k):v.classList.remove("sticky"),k=e},_=()=>{L.setAttribute("data-user-scrolling","true"),clearTimeout(T),T=setTimeout(()=>{L.removeAttribute("data-user-scrolling")},100)};window.addEventListener("scroll",j);document.addEventListener("wheel",_);const H=document.querySelectorAll(".menu-items.router .menu-item a");H.forEach(e=>{e.href===window.location.href||window.location.pathname.endsWith(e.getAttribute("href"))?e.parentElement.classList.add("active"):e.parentElement.classList.remove("active")});const h=U.create({baseURL:"https://your-energy.b.goit.study/api",headers:{"Content-Type":"application/json"}});h.interceptors.response.use(e=>e,e=>{var t;if(e.response&&e.response.status===409){const s=((t=e.response.data)==null?void 0:t.message)||"Subscription already exists";return g.error({title:"Subscription Error",message:s,position:"topRight"}),{data:null}}else return console.error(e),g.error({title:"Request Error",message:e==null?void 0:e.message,position:"topRight"}),{data:null}});async function B(e){const{data:t}=await h.get("/exercises",{params:e});return t}async function te(e){const{data:t}=await h.get(`/exercises/${e}`);return t}async function se(e,t){const{data:s}=h.patch(`/exercises/${e}/rating`,t);return s}async function re(e={}){const{data:t}=await h.get("/filters",{params:e});return t}async function D(){const{data:e}=await h.get("/quote");return e}async function N(){const e=new Date().toISOString().split("T")[0],t=localStorage.getItem("quote"),s=localStorage.getItem("author"),o=localStorage.getItem("quoteDate");if(t&&s&&o===e){document.querySelector(".sidebar-quote").textContent=`${t}`,document.querySelector(".sidebar-quote-author").textContent=`${s}`;return}const r=await D(),i=r.quote,n=r.author;document.querySelector(".sidebar-quote").textContent=`${i}`,document.querySelector(".sidebar-quote-author").textContent=`${n}`,localStorage.setItem("quote",i),localStorage.setItem("author",n),localStorage.setItem("quoteDate",e)}N();const $=document.querySelector(".subscribe-form"),S=$.querySelector("input");$.addEventListener("submit",async e=>{e.preventDefault();const t=S.value.trim();if(!S.checkValidity()){S.reportValidity();return}try{const o=await fetch("https://your-energy.b.goit.study/api/subscription",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})});if(!o.ok)throw new Error("Something went wrong");const r=await o.json();g.success({title:"Subscription Success",message:r.message,position:"topRight"})}catch{g.error({title:"Subscription Error",message:"Failed to subscribe. Please try again.",position:"topRight"})}});const I=document.querySelector(".footer-date");if(I){const e=new Date().getFullYear();I.textContent=e<2025?"©2025":"©"+e}const V="modulepreload",W=function(e){return"/goit-advancedjs-final-project/"+e},P={},J=function(t,s,o){let r=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),a=(n==null?void 0:n.nonce)||(n==null?void 0:n.getAttribute("nonce"));r=Promise.allSettled(s.map(c=>{if(c=W(c),c in P)return;P[c]=!0;const m=c.endsWith(".css"),C=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${C}`))return;const l=document.createElement("link");if(l.rel=m?"stylesheet":V,m||(l.as="script"),l.crossOrigin="",l.href=c,a&&l.setAttribute("nonce",a),document.head.appendChild(l),m)return new Promise((F,R)=>{l.addEventListener("load",F),l.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(n){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=n,window.dispatchEvent(a),!a.defaultPrevented)throw n}return r.then(n=>{for(const a of n||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})};function oe(e){return String(e).charAt(0).toUpperCase()+String(e).slice(1)}function ie(e,t="LI",s="UL"){for(;e.nodeName!==t&&e.nodeName!==s;)e=e.parentElement;return e.nodeName===t?e:null}const Q=768,z=()=>window.innerWidth<Q,p="invisiable",d="favouritesExercises",K="It appears that you haven't added any exercises to your favorites yet. To get started, you can add exercises that you like to your favorites for easier access in the future.",Y={Muscles:"muscles","Body parts":"bodypart",Equipment:"equipment"},E={initParams:new URLSearchParams(window.location.search),set(e,t){const s=new URLSearchParams(window.location.search);s.set(e,t),this.update(s)},new(e,t){const s=new URLSearchParams;s.set(e,t),this.update(s)},get(e){return new URLSearchParams(window.location.search).get(e)},delete(e){const t=new URLSearchParams(window.location.search);t.delete(e),update(t)},update(e){if(history.pushState){const t=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+e.toString();window.history.pushState({path:t},"",t)}}},f="/goit-advancedjs-final-project/assets/icons-DMAIjxcC.svg";class b{constructor(t,s,o){y(this,"paginationExerciseCallback",t=>{E.set("page",t),this.render(t)});y(this,"searchCallback",t=>{this.keyword=t||"",t?E.set("keyword",t):E.delete("keyword"),this.render()});this.exerciseyList=document.body.querySelector(".exercise-list"),this.limit=z()?8:10,this.paginationInstance=s,this.errorElement=document.body.querySelector("[data-exerciseError]"),this.modalInstance=o,this.exerciseyList.addEventListener("click",r=>this.handleExerciseClick(r)),t&&async function(r){const i=await J(()=>import("./search-C0UI3lRV.js"),__vite__mapDeps([0,1,2]));r.searchForm=i.default}(this)}init(t,s,o="",r=1){this.show(),this.filter=t,this.exercise=s,this.keyword=o,this.searchForm&&(this.searchForm.show(),this.searchForm.setValue(o),this.searchForm.callback=this.searchCallback),this.render(r)}handleExerciseClick(t){this.modalInstance.open(t)}async render(t=1){try{const s={[Y[this.filter]]:this.exercise,limit:this.limit,page:t};this.keyword&&(s.keyword=this.keyword);const o=await B(s);this.page=t,o.results.length?(this.errorHide(),this.exerciseyList.innerHTML=o.results.map(r=>b.exerciseMarkup(r)).join("")):(this.exerciseyList.innerHTML="",this.errorShow()),this.paginationInstance.render(o.totalPages,o.page),this.paginationInstance.callback=this.paginationExerciseCallback,this.show()}catch{iziToast.error({title:"Unexpected error",message:"Try to refresh the page",position:"topRight"})}}static exerciseMarkup({_id:t,rating:s,name:o,burnedCalories:r,time:i,bodyPart:n,target:a},c=!1){return`<li class="workout-card" data-id="${t}">
          <div class="workout-card-container">
            <div class="workout-header">
              <span class="workout-badge">WORKOUT</span>
              ${c?`<button onclick="document.removeFavourite(this)" class="workout-remove-btn">
                  <svg width="16" height="16" class="workout-remove-icon">
                    <use xlink:href="${f}#icon-remove"></use>
                  </svg></button>`:`<div class="workout-rating">
                    <span class="workout-rating-value">${s.toFixed(2)}</span>
                    <svg width="18" height="18" class="workout-rating-icon">
                      <use xlink:href="${f}#icon-Star"></use>
                    </svg>
                  </div>`}
              <a href="#" class="workout-start-btn"
                >Start
                <svg width="16" height="16" class="workout-start-icon">
                  <use xlink:href="${f}#icon-start"></use>
                </svg>
              </a>
            </div>
            <div class="workout-body">
              <svg width="24" height="24" class="workout-icon">
                <use xlink:href="${f}#icon-running"></use>
              </svg>
              <h3 class="workout-title">${o}</h3>
            </div>
            <ul class="workout-meta">
              <li class="workout-meta-item">
                <span class="workout-meta-name">Burned calories:</span>
                <span class="workout-meta-value">${r} / ${i||"..."}</span>
              </li>
              <li class="workout-meta-item">
                <span class="workout-meta-name">Body part:</span>
                <span class="workout-meta-value">${n}</span>
              </li>
              <li class="workout-meta-item">
                <span class="workout-meta-name">Target:</span>
                <span class="workout-meta-value">${a}</span>
              </li>
            </ul>
          </div>
        </li>`}show(){this.exerciseyList.classList.remove(p),this.exerciseyList.hidden=!1}hide(){this.exerciseyList.classList.add(p),this.exerciseyList.hidden=!0,this.errorHide()}errorShow(t="Exersice was not found"){this.errorElement.innerHTML=t,this.errorElement.classList.remove(p),this.errorElement.hidden=!1}errorHide(){this.errorElement.innerHTML="",this.errorElement.classList.add(p),this.errorElement.hidden=!0}}function ne(e){return!!w(d)[e]}function ae(e){const t=w(d);t[e._id]=e,localStorage.setItem(d,JSON.stringify(t))}function G(e){const t=w(d);t.hasOwnProperty(e)?delete t[e]:console.warn(`Exercise with id ${e} does not exist in storage.`),localStorage.setItem(d,JSON.stringify(t))}const x={list:document.getElementById("favourites")};function w(e){if(!localStorage)return console.error("Local storage is not supported in this browser."),{};const t=localStorage.getItem(e);return t?JSON.parse(t):{}}function q(){const e=w(d),t=Object.values(e);if(!Array.isArray(t)){console.error("Invalid exercises data:",t),O();return}if(t.length===0){O();return}const s=document.createElement("ul");s.classList.add("exercise-list"),s.innerHTML=t.map(o=>b.exerciseMarkup(o,!0)).join(""),x.list.innerHTML="",x.list.appendChild(s)}function O(){x.list.innerHTML=`<p class="text">${K}</p>`}function X(){document.addEventListener("DOMContentLoaded",()=>{q()}),document.removeFavourite=function(e){const t=e.closest("[data-id]").dataset.id;G(t),q()}}window.location.pathname.includes("favorites.html")&&X();export{b as E,p as I,J as _,f as a,te as b,oe as c,ne as d,ae as e,ie as f,re as g,z as i,G as r,E as s,se as u};
//# sourceMappingURL=favourites-D4E0UFt3.js.map
